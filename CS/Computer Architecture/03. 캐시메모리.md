
# 캐시 메모리

`정의`

- 속도가 빠른 장치와 느린 장치에서 속도 차이에 따른 병목 현상을 줄이기 위한 메모리
- CPU 코어와 메모리 사이의 병목 현상 완화
- 하드디스크와 웹페이지 사이의 병목 현상을 완화

`동작방식`

1. CPU가 주기억장치에서 저장된 데이터를 읽어온다.
2. 자주 사용하는 데이터는 캐시 메모리에 저장한다.
3. 다음에 이용할 때는 캐시메모리에서 데이터를 가져온다

`장점`
속도가 빠르다

`단점`
용량이 적고 비용이 비싸다

`속도와 크기에 따라`

- L1 : CPU 내부에 존재
- L2 : CPU와 RAM 사이에 존재
- L3 : 보통 메인보드에 존재

`듀얼코어 캐시`
듀얼 코어 프로세서의 캐시 메모리 - 코어마다 독립된 L1 캐시 메모리를 가짐 - 두 코어가 공유하는 L2 캐시 메모리가 내장

`디스크 캐시`
주기억장치(RAM)와 보조기억장치(하드디스크) 사이에 존재하는 캐시

`작동 원리`

- 시간 지역성 : 한번 참조된 데이터는 잠시후 또 참조될 가능성이 높음
- 공간 기역성 : 연속 접근 시, 참조된 데이터 근처에 있는 데이터가 잠시후 또 사용될 가능성이 높음

`캐시 미스`

1. Cold miss : 해당 메모리 주소를 처음 불러서 나는 미스
2. Conflict miss(주소할당문제) : 캐시 메모리에 A와 B 데이터를 저장해야 하는데, A와 B가 같은 캐시 메모리 주소에 할당되어 있어서 나는 미스 (direct mapped cache에서 많이 발생)
3. Capacity miss(공간문제) : 캐시 메모리의 공간이 부족해서 나는 미스

`캐시 크기를 키운다면?`
캐시 접근 속도↓, 파워 많이 먹음↑

`구조 및 작동 방식`

1. Direct Mapped Cache

   - 가장 기본적인 구조
   - `방식` : DRAM의 여러 주소가 캐시 메모리의 한 주소에 대응되는 다대일 방식
   - `구성` : 인덱스 필드 + 태그 필드 + 데이터 필드
   - `장점` : 간단하고 빠름
   - `단점` : conflict miss 발생

2. Fully Associative Cache

   - `방식` : 비어있는 캐시 메모리가 있으면, 마음대로 주소를 저장하는 방식ㅕ
   - `장점` : 간단하게 저장
   - `단점` : 찾기 어려움
   - `찾는 방법` : 특정 캐시 Set 안에 있는 모든 블럭을 한번에 찾아 원하는 데이터가 있는지 검색
   - `대안` : CAM이라는 특수한 메모리 구조를 사용(단점 : 가격이 비쌈)

3. Set Associative Cache
   - Direct + Fully 방식(중간형)
   - `방식` : 특정 행을 지정하고, 그 행안의 어떤 열이든 비어있을 때 저장하는 방식
   - Direct에 비해 검색 속도가 느리지만, 저장이 빠름
   - Fully에 비해 저장이 느린 대신 검색이 빠름
