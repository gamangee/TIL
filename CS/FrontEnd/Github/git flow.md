# 혼자 개발 할 때

1. 코드의 수정, 기능 개발 등을 할 때만 branch를 여는 유형
2. 하나의 branch만 사용하는 유형

# Branch 전략

브랜치 생성에 규칙을 만들어서 협업을 유연하게 하는 방법론

`정의` 여러 명의 개발자가 1개의 저장소를 사용하는 환경에서 효과적으로 사용하기 위한 전략

`종류`

github flow

git flow

gitLab flow

# 1. Git flow

`정의` Vincent Driessen이 2010년에 제안한 Branch Model을 기반으로 만들어진 브랜치 전략 (현재 많은 기업에서 표준으로 사용)

`운영`

- Main Branch
  - 2개의 브랜치는 항상 남아 있다.
  `master` 기준이 되는 브랜치로 제품을 배포하는 브랜치 입니다.
  `develop` 개발 브랜치로 개발자들이 이 브랜치를 기준으로 각자 작업한 기능들을 합(Merge)칩니다.
- Sub Branch
  - 사용을 마치면 브랜치를 삭제한다.
  `feature` 단위 기능을 개발하는 브랜치로 기능 개발이 완료되면 develop 브랜치에 합칩니다.
  `release` 배포를 위해 master 브랜치로 보내기 전에 먼저 QA(품질검사)를 하기 위한 브랜치 입니다.
  `hotfix` master 브랜치로 배포를 했는데 버그가 생겼을 때 긴급 수정하는 브랜치 입니다.

`특징`

가장 최초로 제안된 Workflow 방식

대규모 프로젝트 관리에 적합하다.

배포 주기가 길고 팀의 이력이 있는 경우 적합하다.

`--na-f`

브랜치 전략에서 merge할 때 사용하는 것을 권장한다.

Fast-forwoard 관계에 있어도 merge commit 생성하여 해당 브랜치가 존재하였다는 정보를 남길 수 있다.

commit 기록을 되돌리기 편해진다.

`--na-f` 을 사용하지 않으면?

브랜치의 존재 여부를 몰라 어떤 commit부터 해당 기능을 구현했는 지 확인하기 어렵다.

# 2. Github flow

`정의` github에서 만든 단순한 구조의 브랜치 전략

`특징`

git-flow를 개선하기 위해 나온 하나의 방식

흐름이 단순한 만큼, 역할도 단순하다.

master 브랜치를 중심으로 운영

기능 개발 버그 수정 등의 작업을 브랜치를 구분하지 않는 단순하나 구조

수시로 배포가 일어나는 프로젝트에 유용

Merge가 완료되면, push를 진행하고 자동으로 배포가 완료된다. (GitHub-flow의 핵심적인 부분)

`브랜치의 생명주기`

1. 브랜치 생성
   - master로 부터 기능추가, 버그 수정 작업을 위한 새로운 브랜치를 생성한다.
   - commit 메세지와 브랜치 이름은 정확하고 간결하게 작성해야하 한다.
   - 기능 추가, 버그 수정 작업을 하는 모든 브랜치는 master로 부터 나온다.
2. 기능 개발, 버그 수정
   - 작업을 하며 기능 별로 commit을 한다.
   - commit 메세지는 정확하고 간결하게 작성해야 한다.
   - commit은 서버의 동일한 브랜치에 push해줘야 한다. (git flow 차이점)
3. Pull Request 생성
   - 기능 또는 오류 수정이 완료되었으면 PR을 보낸다.
4. 리뷰와 논의

   PR을 통해 팀원과 작성한 코드에 대한 리뷰와 논의를 한다.

5. 공개 및 테스트
   - github에서는 master에 합치기 전에 브랜치에서 코드를 공개 및 테스트 할 수 있다.
   - PR 상의와 테스트가 끝난 경우 (테스트 버전으로) 공개 할 수 있다.
   - 오류가 발생할 경우 원래의 master 브랜치를 다시 배포하여 roll back 한다.
6. 합치기(Merge)
   - branch 의 검증이 완료되면 메인 브랜치에 합친다.

# 3. GitLab flow

github flow 배포, 환경구성, 릴리즈, 통합 이슈를 보완한 절충안

배포만을 담당하는 `Production` 브랜치(=github flow `master`해당)

개발한 내용을 곧장 반영하지 않고 시간을 두고 반영할 수 있는 `pre-production`
 브랜치

# 무엇을 사용해야 할까?

- 팀의 브랜칭 전략은 조직의 규모, 서비스의 특징 등을 고려하여 협의를 통해 전략을 결정해야한다.
- Production의 공식 배포 주기가 길고, QA, 테스트, hotfix 등의 여력이 있으면 Git flow가 적합하다.
- 지속적으로 테스트 및 배포를 해야하는 팀의 경우 간단한 Github flow를 사용하는 것이 좋다.
- Work-flow 를 필요 이상으로 복잡하게 만드는 것은 좋지 않다.
